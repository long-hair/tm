"use strict";var n=(n=localStorage.getItem("user"))?n.split(","):[0,"sid"];$.ajax({type:"get",url:"../json/details.json",dataType:"json",success:function(t){var g="";$.each(t,function(t,i){if(window.location.search==="?"+t){for(var e in $(".artwork").find("img").attr("src",i.src[0]),$(".magnify").find("img").attr("src",i.srcmax[0]),i.srcmin)$(".hover").find("img")[e].src=i.srcmin[e];var a='\n        <h3 class="con_title">'.concat(i.title,'</h3>\n                <p class="trait">').concat(i.trait,'</p>\n                <img class="tmdq" src="../image/detail/tmdq.png" alt="">\n                <div class="price">\n                    <li><label for="">价格</label><del>').concat(i.price1,'</del></li>\n                    <li><label for="">促销价</label><i>').concat(i.price2,'</i><img\n                        class="cx" src="../image/detail/cx.png" alt=""></li>\n                    <li><label for="">本店活动</label><em>').concat(i.activity,'</em><a>更多优惠<img src="../image/detail/xia.png" alt=""></a></li>\n                </div>\n                <div class="freight">\n                    <li><label for="">运费</label><p>上海 至深圳<img src="../image/detail/xia.png" alt="">罗湖区<img src="../image/detail/xia.png" alt="">快递费：0.00</p></li>\n                    <li>\n                        <em>月销量<i>2342</i></em><span>|</span>\n                        <em>累计评价<i>14678</i></em><span>|</span>\n                        <em>送天猫积分<u>469</u></em>\n\n                    </li>\n                </div>\n                <ul class="type">\n                    <li>\n                        <label for="">内存容量</label>\n                        <div class="active">8GB</div>\n                    </li>\n                    <li>\n                        <label for="">硬盘容量</label>\n                        <div class="active">512G固态硬盘</div>\n                    </li>\n                    <li>\n                        <label for="">颜色分类</label>\n                        <div class="active"><img src="../image/detail/wmin.jpg" alt=""></div>\n                        <div><img src="../image/detail/bmin.jpg" alt=""></div>\n                    </li>\n                    <li>\n                        <label for="">套餐类型</label>\n                        <h1>\n                            <div class="active">官方标配</div>\n                            <div>定制A:12G内存（本店加装）新店</div>\n                            <div>定制B:32G傲腾（本店加装）</div>\n                            <div>定制C:32G傲腾（本店加装）</div>\n                            <div>官方标配+特惠套餐</div>\n                            <div>定制A:12G内存（本店加装新品）+特惠套餐</div>\n                        </h1>\n                    </li>\n                </ul>\n                <div class="btn">\n                    <button class="buy">立即购买</button>\n                    <button sid="').concat(i.id,'" class="car">加入购物车</button>\n                </div>\n        ');$(".con_center").append(a),$(".type").on("click","div",function(){$(this).addClass("active"),$(this).siblings(".active").removeClass("active")}),$(".con_center").on("click",".car",function(){var t,i,e,a=this,s=(localStorage.length,!0),l="";localStorage.getItem(n[1])?(l=JSON.parse(localStorage.getItem(n[1])),$.each(l,function(t,i){i.cid==$(a).attr("sid")&&(s=!1,i.num=++i.num);var e=JSON.stringify(l);localStorage.setItem(n[1],e)}),s&&(l.push({cid:$(a).attr("sid"),num:1}),i=JSON.stringify(l),localStorage.setItem(n[1],i))):(t=[{cid:$(a).attr("sid"),num:1}],e=JSON.stringify(t),localStorage.setItem(n[1],e)),location.reload()}),d.prototype.init=function(t){this.left=document.querySelector(t.left),this.mask=document.querySelector(t.mask),this.right=document.querySelector(t.right),this.move_img=document.querySelector(t.move_img),this.img=new Image,this.img.src=t.src,this.left_enter(),this.move_leave()},d.prototype.left_enter=function(){var i=this;this.left.onmouseenter=function(t){i.pro_change(i.mask,"display","block"),i.pro_change(i.right,"display","block"),i.mask_move()}},d.prototype.mask_move=function(){var i=this;this.left.onmousemove=function(t){t=t||event,i.x=t.pageX-i.parent(i.left,!0).left-i.mask.clientWidth/2,i.y=t.pageY-i.parent(i.left,!0).top-i.mask.clientHeight/2,i.decide(),i.pro_change(i.mask,"left",i.x+"px"),i.pro_change(i.mask,"top",i.y+"px"),i.pos_move()}},d.prototype.pos_move=function(){this.mox=this.x/(this.left.offsetWidth-this.mask.offsetWidth)*(this.img.width-this.right.clientWidth),this.moy=this.y/(this.left.offsetHeight-this.mask.offsetHeight)*(this.img.height-this.right.clientHeight),this.move_img.style.left=-this.mox+"px",this.move_img.style.top=-this.moy+"px"},d.prototype.pro_change=function(t,i,e){t.style[i]=e},d.prototype.decide=function(){this.x<=0&&(this.x=0),this.x>=this.left.clientWidth-this.mask.clientWidth&&(this.x=this.left.clientWidth-this.mask.clientWidth),this.y<=0&&(this.y=0),this.y>=this.left.clientHeight-this.mask.clientHeight&&(this.y=this.left.clientHeight-this.mask.clientHeight)},d.prototype.parent=function(t,i){for(var e=0,n=0,a=t.clientLeft,s=t.clientTop;e+=t.offsetLeft+t.clientLeft,n+=t.offsetTop+t.clientTop,t=t.offsetParent;);return i?{left:e,top:n}:{left:e-a,top:n-s}},d.prototype.move_leave=function(){var t=this;this.left.onmouseleave=function(){t.pro_change(t.mask,"display","none"),t.pro_change(t.right,"display","none")}},window.ms=function(t){return new d(t)};var s=document.querySelector(".min"),l=document.querySelectorAll(".hover"),c=document.querySelector(".artwork img"),o=document.querySelector(".magnify img");$(s).on("click","li",function(){var t=(t=$(this).find("img").attr("src")).slice(0,18);if("hover"==this.className){for(var i=0;i<l.length;i++)l[i].index=i+1,l[i].className="hover";this.className+=" active",c.src=t+".jpg",o.src=t+"max.jpg"}}),ms({left:".artwork",mask:".mask",right:".magnify",move_img:".magnify img",src:"../image/detail/a2max.jpg"}),$(".video").on("click",function(){$("video").css("display","block"),$(".close").css("display","block"),$("video")[0].play()}),$(".close").on("click",function(){$("video").css("display","none"),$(".close").css("display","none"),$("video")[0].currentTime=0,$("video")[0].pause()});for(var r=i.banner.length/5,m=0,h=0;h<r;h++)g+='<div class="swiper-slide">\n                            <a href=""><img src="'.concat(i.banner[m],'" alt=""></a>\n                            <a href=""><img src="').concat(i.banner[++m],'" alt=""></a>\n                            <a href=""><img src="').concat(i.banner[++m],'" alt=""></a>\n                            <a href=""><img src="').concat(i.banner[++m],'" alt=""></a>\n                            <a href=""><img src="').concat(i.banner[++m],'" alt=""></a>\n                        </div>\n                '),m++;$(".swiper-wrapper").append(g);new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function d(t){this.init(t)}})},error:function(){alert("错误")}});