"use strict";var n;localStorage.getItem("user")?1==(n=localStorage.getItem("user").split(","))[0]&&($(".a1").text(n[1]),$(".a2").text("退出").attr("href","#"),$(".a2").on("click",function(){localStorage.removeItem("user"),$(".nav_l").empty().append('  <a href="./index.html">天猫首页</a>\n            <p>喵，欢迎来到天猫</p>\n            <a href="http://10.20.158.35/qianfeng/day0812/work/gulp-cli/dist/pages/login.html#">请登录</a>\n            <a href="http://10.20.158.35/qianfeng/day0812/work/gulp-cli/dist/pages/login.html#">免费注册</a>')})):(n=[0,"sid"],console.log(n[1])),$.ajax({type:"get",url:"../json/details.json",dataType:"json",success:function(e){var i="",t=localStorage.getItem(n[1]),t=JSON.parse(t);$.each(t,function(t,n){var s=n.cid;i+='<li lid="'.concat(e[s].id,'">\n                    <img src="').concat(e[s].src[0],'" alt=""><span>数量</span>\n                    <div class="n">\n                           <span class="jian">-</span><i class="num">').concat(n.num,'</i><span class="jia">+</span>\n                        </div>\n                    <span>价格</span><i class="pr">￥').concat(Number(e[s].price2.slice(1))*n.num,'</i>\n                    \n                    <button class="del">删除</button></li>')}),$(".mycar").append(i);var s=$(".mycar").find(".num");$.each(s,function(t,n){1==Number($(n).text())&&$(n).siblings(".jian").css({opacity:.4,border:"1px solid red",cursor:"not-allowed"})}),$(".mycar").on("click","span",function(){var s,i,t=localStorage.getItem(n[1]),t=JSON.parse(t);"jia"==$(this).attr("class")&&(console.log(this),0<Number($(this).siblings(".num").text())&&$(this).siblings(".jian").css({opacity:1,border:"1px solid rgb(230,230,250)",cursor:"pointer"}),s=Number($(this).siblings(".num").text())+1,$(this).siblings(".num").text(s),i=$(this).closest("li").attr("lid"),$(this).parent().siblings(".pr").text("￥"+Number(e[i].price2.slice(1))*s),$.each(t,function(t,n){n.cid==i&&(n.num=s)}),t=JSON.stringify(t),localStorage.setItem(n[1],t))}),$(".mycar").on("click","span",function(){var s,t,i,a;"jian"==$(this).attr("class")&&((s=Number($(this).siblings(".num").text())-1)<=1&&(s=1,t=$(".mycar").find(".num"),$.each(t,function(t,n){2==Number($(n).text())&&$(n).siblings(".jian").css({opacity:.4,border:"1px solid red",cursor:"not-allowed"})})),i=localStorage.getItem(n[1]),i=JSON.parse(i),$(this).siblings(".num").text(s),a=$(this).closest("li").attr("lid"),$(this).parent().siblings(".pr").text("￥"+Number(e[a].price2.slice(1))*s),$.each(i,function(t,n){n.cid==a&&(n.num=s)}),i=JSON.stringify(i),localStorage.setItem(n[1],i))}),$(".mycar").on("click","button",function(){var s=localStorage.getItem(n[1]),s=JSON.parse(s),i=$(this).closest("li").attr("lid");$(this).closest("li").remove(),$.each(s,function(t,n){n.cid!=i||s.splice(t,1)}),s=JSON.stringify(s),localStorage.setItem(n[1],s)})},error:function(){console.log("失败")}});