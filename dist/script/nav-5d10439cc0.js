"use strict";var n;localStorage.getItem("user")?1==(n=localStorage.getItem("user").split(","))[0]&&($(".a1").text(n[1]),$(".a2").text("退出").attr("href","#"),$(".a2").on("click",function(){localStorage.removeItem("user"),$(".nav_l").empty().append(' <p>喵，欢迎来到天猫</p>\n            <a class="a1" href="http://10.20.158.35/qianfeng/day0812/work/gulp-cli/dist/pages/login.html#">请登录</a>\n            <a class="a2" href="http://10.20.158.35/qianfeng/day0812/work/gulp-cli/dist/pages/login.html#">免费注册</a>')})):n=[0,"sid"],$.ajax({type:"get",url:"../json/details.json",dataType:"json",success:function(e){var i="",t=localStorage.getItem(n[1]),t=JSON.parse(t);$.each(t,function(t,s){var n=s.cid;i+='<li lid="'.concat(e[n].id,'">\n                    <img src="').concat(e[n].src[0],'" alt=""><span>数量</span>\n                    <div class="n">\n                           <span class="jian">-</span><i class="num">').concat(s.num,'</i><span class="jia">+</span>\n                        </div>\n                    <span>价格</span><i class="pr">￥').concat(Number(e[n].price2.slice(1))*s.num,'</i>\n                    \n                    <button class="del">删除</button></li>')}),$(".mycar").append(i);var s=$(".mycar").find(".num");$.each(s,function(t,s){1==Number($(s).text())&&$(s).siblings(".jian").css({opacity:.4,border:"1px solid red",cursor:"not-allowed"})}),$(".mycar").on("click","span",function(){var i,a,t=localStorage.getItem(n[1]),t=JSON.parse(t);"jia"==$(this).attr("class")&&(console.log(this),0<Number($(this).siblings(".num").text())&&$(this).siblings(".jian").css({opacity:1,border:"1px solid rgb(230,230,250)",cursor:"pointer"}),i=Number($(this).siblings(".num").text())+1,$(this).siblings(".num").text(i),a=$(this).closest("li").attr("lid"),$(this).parent().siblings(".pr").text("￥"+Number(e[a].price2.slice(1))*i),$.each(t,function(t,s){s.cid==a&&(s.num=i)}),t=JSON.stringify(t),localStorage.setItem(n[1],t))}),$(".mycar").on("click","span",function(){var i,t,s,a;"jian"==$(this).attr("class")&&((i=Number($(this).siblings(".num").text())-1)<=1&&(i=1,t=$(".mycar").find(".num"),$.each(t,function(t,s){2==Number($(s).text())&&$(s).siblings(".jian").css({opacity:.4,border:"1px solid red",cursor:"not-allowed"})})),s=localStorage.getItem(n[1]),s=JSON.parse(s),$(this).siblings(".num").text(i),a=$(this).closest("li").attr("lid"),$(this).parent().siblings(".pr").text("￥"+Number(e[a].price2.slice(1))*i),$.each(s,function(t,s){s.cid==a&&(s.num=i)}),s=JSON.stringify(s),localStorage.setItem(n[1],s))}),$(".mycar").on("click","button",function(){var i=localStorage.getItem(n[1]),i=JSON.parse(i),a=$(this).closest("li").attr("lid");$(this).closest("li").remove(),$.each(i,function(t,s){s.cid!=a||i.splice(t,1)}),i=JSON.stringify(i),localStorage.setItem(n[1],i)})},error:function(){console.log("失败")}});